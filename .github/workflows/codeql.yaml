name: Build and Scan with CodeQL

on: 
  push:
    branches: 
      - master

jobs:
  build:
    runs-on: ubuntu-latest
    
    strategy:
      fail-fast: false
      matrix:
        # Override automatic language detection by changing the below list
        # Supported options are ['csharp', 'cpp', 'go', 'java', 'javascript', 'python']
        language: ['java']
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    
    - name: Setup Java
      uses: actions/setup-java@v1
      with:
        java-version: 11
    
    - name: Build with Maven
      run: mvn clean install
      
    - name: Initialize CodeQL
      uses: github/codeql-action/init@v2
      with:
       debug: true  
    
    - name: Scan with CodeQL
      uses: github/codeql-action/analyze@v2
      with:
        languages: java
        force-run: true
